/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.mycompany.findvulnerability;
import java.io.*;
/**
 *
 * @author Fatemeh Saligheh
 */
public class EditJsonFiles {
    public static final String STRING_A = "},\n" +
"  ]";
    public static final String STRING_B = "}\n" +
"  ]";
    
    public EditJsonFiles(String path){
        //1
        String originalFilePath = path;
        String originalFileContent = "";
        //2
        BufferedReader reader = null;
        BufferedWriter writer = null;
        //3
        try {
            //4
            System.out.println("reading");
            reader = new BufferedReader(new FileReader(originalFilePath));
            //5
            String currentReadingLine = reader.readLine();
            System.out.println(currentReadingLine);
            //6
            while (currentReadingLine != null) {
                originalFileContent += currentReadingLine + System.lineSeparator();
                currentReadingLine = reader.readLine();
            }
            //7
            String modifiedFileContent = originalFileContent.replaceAll(STRING_A, STRING_B);
            //8
            writer = new BufferedWriter(new FileWriter(originalFilePath));
            //9
            writer.write(modifiedFileContent);
        } catch (IOException e) {
            //handle exception
        } finally {
            //10
            try {
                if (reader != null) {
                    reader.close();
                }
                if (writer != null) {
                    writer.close();
                }
            } catch (IOException e) {
                //handle exception
            }
        }
    }
}
